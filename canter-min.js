/*
    Canter.js Copyright 2015 iWebMa Ltd., Arnold Matyasi. 
    Canter.js may be freely distributed under the MIT license.
    Commercial and non-commercial use are permitted in compliance with the License.
 */
const VERSION="0.1.68";var ops={or:function(n,r){return n||r},and:function(n,r){return n&&r},eq:function(n,r){return n==r},neq:function(n,r){return n!=r},lt:function(n,r){return r>n},lte:function(n,r){return r>=n},gt:function(n,r){return n>r},gte:function(n,r){return n>=r},"in":function(n,r){return r.some(function(r){return r==n})},nin:function(n,r){return r.every(function(r){return r!=n})},plus:function(n,r){return 1*n+1*r},minus:function(n,r){return n-r},mult:function(n,r){return n*r},div:function(n,r){return n/r},inc:function(n){return 1*n+1},dec:function(n){return n-1},square:function(n){return n*n}},is={Object:function(n){return"object"==typeof n?!0:!1},Array:function(n){return Array.isArray(n)},Number:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},String:function(n){return"string"==typeof n},Indexed:function(n){return"string"==typeof n||is.Array(n)},Unique:function(n,r,t){return t.indexOf(n)===r},Undefined:function(n){return void 0==n},notUndefined:function(n){return void 0!=n}},comp=function(){var n=[].slice.call(arguments),r=first(n),t=rest(n),e=t.length;return function(n){for(var u=n,o=0;e>o;o++){var i,c,f=t[o];is.Array(f)?(i=first(f),c=rest(f),u="->"==r?i(u,c):"->>"==r?i(c,u):i(c,u)):u=f(u)}return u}},map=function(n,r){for(var t=r.length,e=new Array(t),u=0;t>u;u++)e[u]=n(r[u]);return e},uniq=function(n){return n.filter(is.Unique)},range=function(n){for(var r=new Array(n),t=0;n>t;t++)r[t]=t;return r},cons=function(n,r){var t=r.slice(0);return t.unshift(n),t},conj=function(n,r){var t=n.slice(0);return t.push(r),t},merge=function(n,r){return n.concat(r)},nth=function(n,r){return n[r]},first=function(n){return nth(n,0)},second=function(n){return nth(n,1)},rest=function(n){return n.slice(1)},last=function(n){return nth(n,n.length-1)},interpose=function(n,r){return r.join(n)},strim=function(n){return n.trim()},stringToNumber=function(n){return is.Number(n)?parseFloat(n):n},strimNumber=comp("->",strim,stringToNumber),splitColnames=function(n){var r;return r=is.String(n)?n.split(","):n.slice()},dt={now:function(){return new Date},getYear:function(n){return n.getUTCFullYear()},getMonth:function(n){return 1*n.getUTCMonth()+1},getDay:function(n){return n.getUTCDate()}},keys=function(n){return is.Object(n)?Object.keys(n):[]},vals=function(n){if(!is.Object(n))return[];for(var r=keys(n),t=r.length,e=new Array(t),u=0;t>u;u++)e[u]=n[r[u]];return e},getv=function(n,r){return n[r]},getkv=function(n,r){var t={};return t[r]=n[r],t},selectKeys=function(n,r){res={};for(var t=r.length,e=0;t>e;e++)res[r[e]]=n[r[e]];return res},count=function(n){return is.Object(n)&&!is.Array(n)?keys(n).length:n.length},queryObj=function(n,r){for(var t=[],e=keys(r),u=e.length,o=0;u>o;o++){var i,c;is.Object(r[e[o]])?(i=keys(r[e[o]]),c=r[e[o]][i]):(i="eq",c=r[e[o]]);var f=ops[i];t.push(f(n[e[o]],c))}return t.reduce(ops.and)},filterObj=function(n,r){for(var t={},e=keys(n),u=e.length,o=0;u>o;o++)r(n[e[o]])&&(t[e[o]]=n[e[o]]);return t},cloneObject=function(n){for(var r={},t=keys(n),e=t.length,u=0;e>u;u++)r[t[u]]=n[t[u]];return r},mergeObjects=function(n,r){for(var t=cloneObject(n),e=keys(r),u=e.length,o=0;u>o;o++)t[e[o]]=r[e[o]];return t},colNames=function(n){return keys(n[0])},selectColumn=function(n,r){for(var t=r.length,e=new Array(t),u=splitColnames(n),o=u.length,i=0;t>i;i++){for(var c={},f=0;o>f;f++)c[u[f]]=r[i][u[f]];e[i]=c}return e},pluck=function(n,r){var t=rest(oar2mtx(selectColumn(n,r)));return 1==t[0].length?flatten(t):t},queryOar=function(n,r){for(var t=[],e=n.length,u=0;e>u;u++)queryObj(n[u],r)&&t.push(n[u]);return t},indexBy=function(n,r){for(var t={},e=n.length,u=0;e>u;u++)t[n[u][r]]=u;return t},addColumn=function(n,r,t){for(var e=t.length,u=new Array(e),o=0;e>o;o++){var i=cloneObject(t[o]);i[n]=r[o],u[o]=i}return u},flatten=function(n){return[].concat.apply([],n)},flatuniq=comp("->",flatten,uniq),transpose=zip=unzip=function(n){for(var r=n[0].length,t=n.length,e=new Array(r),u=0;r>u;u++){for(var o=new Array(t),i=0;t>i;i++)o[i]=n[i][u];e[u]=o}return e},joinObjects=function(n,r){var t=function(n,t){for(var e=n.length,u=new Array(e),o=indexBy(t,r),i=0;e>i;i++)u[i]=mergeObjects(n[i],t[o[n[i][r]]]);return u};return n.reduce(t)},mtx2oar=function(n){res=[];for(var r=first(n),t=r.length,e=n.length,u=1;e>u;u++){obj={};for(var o=0;t>o;o++)obj[r[o]]=n[u][o];res.push(obj)}return res},oar2mtx=function(n){for(var r=colNames(n),t=n.length,e=r.length,u=new Array(t),o=0;t>o;o++){for(var i=new Array(e),c=0;e>c;c++)i[c]=n[o][r[c]];u[o]=i}return cons(r,u)},csv2mtx=function(n,r){if(void 0==n)var n=",";var t=function(r,t){return r.push(map(strimNumber,t.split(n))),r};return r.split("\n").reduce(t,[])},csv2oar=function(n,r){return mtx2oar(csv2mtx(n,r))},oar2csv=function(n,r){var t=comp("->>",vals,[interpose,n]),e=cons(colNames(r),map(t,r));return interpose("\\n",e)},stat={max:function(n){return Math.max.apply(null,n)},min:function(n){return Math.min.apply(null,n)},sum:function(n){return n.reduce(ops.plus)},sumsq:function(n){return map(ops.square,n).reduce(ops.plus)},mean:function(n){var r=n.length;return 0==r?0:stat.sum(n)/r},mult:function(n,r){for(var t=n.length,e=new Array(t),u=0;t>u;u++)e[u]=n[u]*r[u];return e},wmean:function(n,r){var t=stat.sum(r);return 0==t?0:stat.sum(stat.mult(n,r))/t}},difference=function(n,r){return n.filter(function(n){return r.indexOf(n)<0})},union=function(n,r){return uniq(n.concat(r))},intersection=function(n,r){return n.filter(function(n){return r.indexOf(n)!==-1?!0:void 0})},contains=function(n,r){return ops["in"](r,n)},moreOrLess=function(n,r){var t=0;return n>r&&(t=1),r>n&&(t=-1),t},byKeyAsc=function(n){return function(r,t){return moreOrLess(r[n],t[n])}},byKeyDesc=function(n){return function(r,t){return moreOrLess(t[n],r[n])}},byAsc=function(n,r){return moreOrLess(n,r)},byDesc=function(n,r){return moreOrLess(r,n)},wsortv=function(n,r,t,e){return t+(n-t)*r/e||0},wsort=function(n,r){var t=stat.wmean(n,r),e=stat.max(r);0==e&&(e=1);for(var u=[],o=n.length,i=0;o>i;i++)u.push(wsortv(n[i],r[i],t,e));return u},tsort=function(n){var r=function(n,r){for(var t=n.length,e=new Array(t),u={},o=t,i=function(o,c,f){if(f.indexOf(o)>=0)throw new Error("Cyclic dependency error");if(!u[c]){u[c]=!0;var s=r.filter(function(n){return n[0]===o});if(c=s.length){var a=f.concat(o);do{var l=s[--c][1];i(l,n.indexOf(l),a)}while(c)}e[--t]=o}};o--;)u[o]||i(n[o],o,[]);return e};return r(flatuniq(n),n).reverse()};
//# sourceMappingURL=canter-min.map